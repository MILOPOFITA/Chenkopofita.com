GENERAL CRAVCHENKO
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chenko Tests Avanzado</title>
<style>
  /* Fuentes y Reset */
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
  body {
    margin: 0; font-family: 'Roboto', sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background:
      radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1), transparent 40%),
      radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1), transparent 40%),
      linear-gradient(135deg, #8B0000, #2F0000);
    background-repeat: no-repeat;
    background-size: 400px 400px;
    color: white;
  }

  /* CONTENEDORES PRINCIPALES */
  #requestAccess {
    background: rgba(0,0,0,0.65);
    padding: 3rem 2rem;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255,255,255,0.15);
    max-width: 420px;
    width: 100%;
    text-align: center;
  }

  #requestAccess h1 {
    font-size: 3rem;
    color: #FFDD00;
    text-shadow: 1px 1px 5px #000;
    margin-bottom: 1rem;
  }

  #requestAccess p {
    font-size: 1.2rem;
    margin-bottom: 2rem;
  }

  #requestAccess form {
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
  }

  #requestAccess input[type=email],
  #requestAccess input[type=text],
  #requestAccess input[type=password] {
    padding: 1rem;
    font-size: 1.2rem;
    border-radius: 12px;
    border: none;
    outline: none;
    width: 100%;
  }

  #requestAccess button[type=submit] {
    padding: 1.2rem;
    font-size: 1.3rem;
    border-radius: 14px;
    border: none;
    background-color: #FFDD00;
    color: black;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.3s ease;
  }
  #requestAccess button[type=submit]:hover {
    background-color: #e6c900;
  }

  #requestAccess small {
    font-size: 0.9rem;
    opacity: 0.7;
    margin-top: 0.5rem;
  }

  #requestAccess .btn-access {
    margin-top: 2rem;
    background-color: white;
    color: black;
    font-weight: 700;
    border-radius: 14px;
    padding: 1rem 2rem;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    transition: background-color 0.3s ease;
  }
  #requestAccess .btn-access:hover {
    background-color: #ddd;
  }

  /* OCULTAR APP INICIALMENTE */
  #app {
    display: none;
    max-width: 900px;
    width: 100%;
    padding: 1rem 2rem;
    box-sizing: border-box;
    flex-direction: column;
    align-items: center;
    color: white;
  }

  /* MENÚ */
  #menu {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #menu h1 {
    margin-bottom: 0.3rem;
    font-weight: 700;
    font-size: 2.8rem;
  }
  #menu p {
    margin-top: 0;
    font-size: 1.2rem;
    font-weight: 500;
  }

  .test-choice-btn {
    font-size: 1.4rem;
    font-weight: bold;
    padding: 1rem 2rem;
    margin: 1rem;
    border-radius: 12px;
    cursor: pointer;
    border: none;
    color: black;
    width: 260px;
    transition: transform 0.2s ease;
  }
  .btn-madrid { background-color: #003366; }
  .btn-cadiz { background-color: #FFDD00; }
  .test-choice-btn:hover { transform: scale(1.05); }

  #afterTestSelect {
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  #afterTestSelect p {
    font-size: 1.1rem;
    margin: 0.5rem 0;
  }

  input[type=number] {
    width: 110px;
    padding: 0.6rem;
    border-radius: 8px;
    font-size: 1.1rem;
    margin-bottom: 1rem;
    border: none;
    outline: none;
  }

  #modeSelection label {
    margin: 0 1rem;
    font-weight: 600;
  }

  /* TEST SECTION */
  #testSection {
    margin-top: 2rem;
    width: 100%;
    max-width: 800px;
  }
  #testTitle {
    font-size: 1.8rem;
    margin-bottom: 0.6rem;
  }
  .timer {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: white;
    text-align: center;
  }
  .question-box {
    background-color: white;
    color: black;
    padding: 1rem 1.5rem;
    border-radius: 10px;
    margin-bottom: 1rem;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  .question-box h3 {
    margin-top: 0;
  }
  .option-label {
    display: block;
    padding: 0.6rem 1rem;
    margin: 0.4rem 0;
    border-radius: 8px;
    cursor: pointer;
    border: 1px solid #ccc;
    user-select: none;
    font-size: 1.1rem;
  }
  .option-label:hover {
    background: #eee;
  }
  .correct {
    background-color: #b6f2b6 !important;
    border-color: #0a0 !important;
  }
  .incorrect {
    background-color: #f2b6b6 !important;
    border-color: #a00 !important;
  }
  #explanation {
    background: #f9f9f9;
    color: #222;
    padding: 1rem;
    border-radius: 10px;
    margin-top: 1rem;
    font-style: italic;
    min-height: 60px;
  }

  #result {
    font-size: 1.4rem;
    margin-top: 1.5rem;
    color: white;
    font-weight: 700;
    text-align: center;
  }

  button.button {
    background-color: #fff;
    color: #000;
    border: none;
    padding: 1rem 2rem;
    margin: 2rem auto;
    font-size: 1.3rem;
    cursor: pointer;
    border-radius: 12px;
    display: block;
    max-width: 300px;
    transition: transform 0.2s;
  }
  button.button:hover {
    transform: scale(1.05);
  }

</style>
</head>
<body>

<!-- PANTALLA DE SOLICITUD DE ACCESO -->
<div id="requestAccess">
  <h1>Solicitud de acceso</h1>
  <p>Para acceder a los tests, rellena el formulario con tus datos.<br> Recibiré tu solicitud en mi correo y te enviaré acceso si lo apruebo.</p>

  <form action="https://formspree.io/f/tu_id_formspree" method="POST" autocomplete="off">
    <input type="email" name="email" placeholder="Correo electrónico" required />
    <input type="text" name="username" placeholder="Nombre de usuario" required />
    <input type="password" name="password" placeholder="Contraseña" required />
    <button type="submit">Enviar solicitud</button>
  </form>

  <small>No compartas tu contraseña con nadie. Solo la usarás para acceso si te autorizo.</small>

  <button class="btn-access" onclick="grantAccess()">Ya tengo acceso</button>
</div>

<!-- CONTENIDO PRINCIPAL DE LA WEB -->
<div id="app">

  <div id="menu">
    <h1>ChenkoTests: Oposiciones Bombero</h1>
    <p>Selecciona el tipo de test:</p>
    <button class="test-choice-btn btn-madrid" onclick="selectTest('madrid')">Ayuntamiento de Madrid</button>
    <button class="test-choice-btn btn-cadiz" onclick="selectTest('cadiz')">Consorcio de Cádiz</button>

    <div id="afterTestSelect" style="display:none; flex-direction: column; align-items: center; margin-top: 1rem;">
      <p>¿Cuántas preguntas quieres responder? (1 - 5000)</p>
      <input type="number" id="numQuestions" value="20" min="1" max="5000" />
      <p id="modeSelection">Selecciona modo: 
        <label><input type="radio" name="mode" value="exam" checked> Examen</label> 
        <label><input type="radio" name="mode" value="review"> Repaso</label>
      </p>
      <button class="button" onclick="startTest()">Comenzar test</button>
    </div>
  </div>

  <div id="testSection" style="display:none;">
    <h2 id="testTitle"></h2>
    <div class="timer" id="timer"></div>
    <div id="questionsContainer"></div>
    <div id="explanation"></div>
    <button id="btnFinish" class="button" onclick="submitTest()">Finalizar test</button>
    <div id="result" style="display:none;"></div>
    <button id="btnRestart" class="button" onclick="location.reload()" style="display:none;">Reiniciar</button>
  </div>

</div>

<script>
  // Preguntas ejemplo (tú añadirás las tuyas o extraerás de PDFs)
  const preguntasMadrid = [
    {
      q: "¿Cuál es el color de la manguera tipo 1?",
      options: ["Rojo", "Negro", "Azul"],
      correct: 1,
      explanation: "La manguera tipo 1 se identifica con el color negro para distinguirla en el equipo."
    },
    {
      q: "¿Qué equipo se usa para rescates en altura?",
      options: ["Cuerda dinámica", "Casco básico", "Extintor de CO₂"],
      correct: 0,
      explanation: "La cuerda dinámica es esencial para rescates en altura por su elasticidad."
    },
    {
      q: "¿Cuál es la presión máxima recomendada en una manguera?",
      options: ["10 bar", "15 bar", "20 bar"],
      correct: 2,
      explanation: "La presión máxima recomendada suele ser 20 bar para evitar daños."
    }
  ];

  const preguntasCadiz = [
    {
      q: "¿Qué agente se usa para fuegos tipo B?",
      options: ["CO₂", "Agua", "Espuma", "Polvo seco"],
      correct: 2,
      explanation: "La espuma es el agente más efectivo para fuegos tipo B que involucran líquidos inflamables."
    },
    {
      q: "¿Cuál es la función del equipo autoescala?",
      options: ["Extinción de incendios", "Rescate en altura", "Ventilación de humos", "Primeros auxilios"],
      correct: 1,
      explanation: "El equipo autoescala se utiliza para rescates en altura y acceso a lugares elevados."
    },
    {
      q: "¿Cuál es el color típico del casco para bomberos en Cádiz?",
      options: ["Blanco", "Rojo", "Amarillo", "Negro"],
      correct: 2,
      explanation: "El casco amarillo es típico para bomberos en Cádiz."
    }
  ];

  // Variables globales
  let currentTestType = null;
  let currentQuestions = [];
  let currentMode = 'exam'; // 'exam' o 'review'
  let currentQuestionIndex = 0;
  let score = 0;
  let timeLeft = 0;
  let timerInterval;

  // Función para mostrar formulario o contenido
  function grantAccess() {
    document.getElementById('requestAccess').style.display = 'none';
    document.getElementById('app').style.display = 'flex';
    // Fondo azul neutro para test
    document.body.style.background =
      'radial-gradient(circle at 20% 30%, #003366cc, transparent 40%), radial-gradient(circle at 80% 80%, #0055cccc, transparent 40%), linear-gradient(135deg, #003366, #004080)';
  }

  // Selección tipo test
  function selectTest(testType) {
    currentTestType = testType;
    document.getElementById('afterTestSelect').style.display = 'flex';
  }

  // Inicio del test
  function startTest() {
    const numQ = parseInt(document.getElementById('numQuestions').value);
    if (isNaN(numQ) || numQ < 1 || numQ > 5000) {
      alert('Introduce un número válido de preguntas entre 1 y 5000.');
      return;
    }

    const modeRadio = document.querySelector('input[name="mode"]:checked');
    currentMode = modeRadio ? modeRadio.value : 'exam';

    const allQuestions = currentTestType === 'madrid' ? preguntasMadrid : preguntasCadiz;

    // Ajustamos la cantidad a la disponible
    const maxAvailable = allQuestions.length;
    currentQuestions = allQuestions.slice(0, Math.min(numQ, maxAvailable));

    currentQuestionIndex = 0;
    score = 0;
    timeLeft = currentQuestions.length * 30;

    document.getElementById('menu').style.display = 'none';
    document.getElementById('testSection').style.display = 'block';
    document.getElementById('result').style.display = 'none';
    document.getElementById('explanation').innerHTML = '';

    document.getElementById('btnFinish').style.display = 'block';
    document.getElementById('btnRestart').style.display = 'none';

    document.getElementById('testTitle').textContent = `Test ${currentTestType === 'madrid' ? 'Madrid' : 'Cádiz'} - Pregunta 1 de ${currentQuestions.length}`;

    startTimer();
    showQuestion();
  }

  // Temporizador
  function startTimer() {
    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      timeLeft--;
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      document.getElementById('timer').textContent = `Tiempo restante: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        submitTest();
      }
    }, 1000);
  }

  // Mostrar pregunta actual
  function showQuestion() {
    const qObj = currentQuestions[currentQuestionIndex];
    const container = document.getElementById('questionsContainer');
    container.innerHTML = '';

    let optionsHTML = '';
    for(let i=0; i < qObj.options.length; i++) {
      optionsHTML += `
        <label class="option-label" id="option-label-${i}">
          <input type="radio" name="answer" value="${i}" onchange="selectAnswer(${i})" />
          ${qObj.options[i]}
        </label>`;
    }

    container.innerHTML = `<div class="question-box"><h3>${currentQuestionIndex+1}. ${qObj.q}</h3>${optionsHTML}</div>`;
    document.getElementById('explanation').innerHTML = '';
  }

  // Responder pregunta
  function selectAnswer(selectedIndex) {
    const qObj = currentQuestions[currentQuestionIndex];
    const labels = document.querySelectorAll('.option-label');

    if(currentMode === 'exam') {
      if(selectedIndex === qObj.correct) score++;
      nextQuestion();
    }
    else if(currentMode === 'review') {
      labels.forEach((label, idx) => {
        label.classList.remove('correct', 'incorrect');
        if(idx === qObj.correct) label.classList.add('correct');
        if(idx === selectedIndex && selectedIndex !== qObj.correct) label.classList.add('incorrect');
      });
      if(selectedIndex === qObj.correct) score++;

      document.getElementById('explanation').textContent = qObj.explanation;

      // Deshabilitar inputs para evitar cambios
      const inputs = document.querySelectorAll('input[name="answer"]');
      inputs.forEach(i => i.disabled = true);

      setTimeout(nextQuestion, 2000);
    }
  }

  // Avanzar pregunta o finalizar test
  function nextQuestion() {
    currentQuestionIndex++;
    if(currentQuestionIndex >= currentQuestions.length) {
      submitTest();
      return;
    }
    document.getElementById('testTitle').textContent = `Test ${currentTestType === 'madrid' ? 'Madrid' : 'Cádiz'} - Pregunta ${currentQuestionIndex + 1} de ${currentQuestions.length}`;
    showQuestion();
  }

  // Finalizar test y mostrar resultado
  function submitTest() {
    clearInterval(timerInterval);
    document.getElementById('questionsContainer').innerHTML = '';
    document.getElementById('explanation').innerHTML = '';
    document.getElementById('timer').textContent = '';

    const resultDiv = document.getElementById('result');
    const percentage = Math.round((score / currentQuestions.length) * 100);
    let color = 'white';

    if (percentage >= 90) color = '#4CAF50'; // verde
    else if (percentage >= 70) color = '#FFC107'; // amarillo
    else color = '#F44336'; // rojo

    resultDiv.style.display = 'block';
    resultDiv.style.color = color;
    resultDiv.textContent = `Has acertado ${score} de ${currentQuestions.length} preguntas (${percentage}%).`;

    // Ocultar botón finalizar y mostrar reiniciar
    document.getElementById('btnFinish').style.display = 'none';
    document.getElementById('btnRestart').style.display = 'block';
  }
</script>

</body>
</html>
