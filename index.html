GENERAL CRAVCHENKO
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chenko Tests Avanzado</title>
<style>
  body {
    margin: 0; font-family: 'Roboto', sans-serif;
    background: linear-gradient(135deg, #8B0000, #2F0000);
    color: white;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh; padding: 2rem;
    transition: background 0.5s ease;
    background-image:
      radial-gradient(circle at 10% 20%, rgba(255,255,255,0.03), transparent 25%),
      radial-gradient(circle at 80% 60%, rgba(255,255,255,0.03), transparent 25%);
    background-repeat: repeat;
    background-size: 200px 200px;
  }
  h1, h2, h3 { text-align: center; }
  .test-choice-btn {
    font-size: 1.4rem;
    font-weight: bold;
    padding: 1rem 2rem;
    margin: 1rem;
    border-radius: 12px;
    cursor: pointer;
    border: none;
    color: black;
    width: 250px;
    transition: transform 0.2s ease;
  }
  .btn-madrid { background-color: #003366; }
  .btn-cadiz { background-color: #FFDD00; }
  .test-choice-btn:hover { transform: scale(1.05); }
  #menu { display: flex; flex-direction: column; align-items: center; }
  #modeSelection {
    margin: 1rem 0;
    font-size: 1.1rem;
  }
  input[type=number] {
    width: 100px; padding: 0.5rem; border-radius: 8px; font-size: 1.1rem;
    margin-bottom: 1rem;
  }
  #testSection { max-width: 800px; width: 100%; margin-top: 1rem; }
  .question-box {
    background-color: white; color: black;
    padding: 1rem; border-radius: 10px; margin-bottom: 1rem;
  }
  .option-label {
    display: block;
    padding: 0.5rem;
    margin: 0.4rem 0;
    border-radius: 8px;
    cursor: pointer;
    border: 1px solid #ccc;
    user-select: none;
  }
  .option-label:hover { background: #eee; }
  .correct { background-color: #b6f2b6 !important; border-color: #0a0; }
  .incorrect { background-color: #f2b6b6 !important; border-color: #a00; }
  .timer {
    font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; color: white;
  }
  #explanation {
    background: #f9f9f9;
    color: #222;
    padding: 1rem;
    border-radius: 10px;
    margin-top: 1rem;
    font-style: italic;
  }
  #result {
    font-size: 1.3rem;
    margin-top: 1rem;
    color: white;
    font-weight: bold;
  }
  button.button {
    background-color: #fff;
    color: #000;
    border: none;
    padding: 1rem 2rem;
    margin: 1rem auto;
    font-size: 1.2rem;
    cursor: pointer;
    border-radius: 12px;
    display: block;
    max-width: 300px;
    transition: transform 0.2s;
  }
  button.button:hover { transform: scale(1.05); }

  /* Formulario de solicitud acceso */
  #requestAccess {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 100vh; color: white;
  }
  #requestAccess input[type=email] {
    padding: 0.8rem; font-size: 1.1rem; border-radius: 8px; border: none; margin-bottom: 1rem; width: 280px;
  }
  #requestAccess button {
    padding: 1rem 2rem; font-size: 1.2rem; border-radius: 12px; border: none; cursor: pointer;
  }
</style>
</head>
<body>

<!-- FORMULARIO DE SOLICITUD DE ACCESO -->
<div id="requestAccess">
  <h2>Solicitud de acceso a los tests</h2>
  <p>Por favor, introduce tu correo para solicitar acceso:</p>

  <form action="https://formspree.io/f/tu_id_formspree" method="POST" style="display:flex; flex-direction: column; align-items:center;">
    <input type="email" name="email" placeholder="tuemail@ejemplo.com" required />
    <button type="submit">Enviar solicitud</button>
  </form>

  <p style="margin-top:2rem; font-size:0.9rem; opacity:0.8;">
    Recibirás un email con instrucciones para acceder.
  </p>

  <button onclick="grantAccess()">Ya tengo acceso</button>
</div>

<!-- CONTENIDO PRINCIPAL (Tests) -->
<div id="app" style="display:none; flex-direction: column; align-items: center; width: 100%; max-width: 900px;">

  <div id="menu">
    <h1>ChenkoTests: Oposiciones Bombero</h1>
    <p>Selecciona el tipo de test:</p>
    <button class="test-choice-btn btn-madrid" onclick="selectTest('madrid')">Ayuntamiento de Madrid</button>
    <button class="test-choice-btn btn-cadiz" onclick="selectTest('cadiz')">Consorcio de Cádiz</button>

    <div id="afterTestSelect" style="display:none; flex-direction: column; align-items: center; margin-top: 1rem;">
      <p>¿Cuántas preguntas quieres responder? (1 - 5000)</p>
      <input type="number" id="numQuestions" value="20" min="1" max="5000" />
      <p id="modeSelection">Selecciona modo: 
        <label><input type="radio" name="mode" value="exam" checked> Examen</label> 
        <label><input type="radio" name="mode" value="review"> Repaso</label>
      </p>
      <button class="button" onclick="startTest()">Comenzar test</button>
    </div>
  </div>

  <div id="testSection" style="display:none;">
    <h2 id="testTitle"></h2>
    <div class="timer" id="timer"></div>
    <div id="questionsContainer"></div>
    <div id="explanation"></div>
    <button class="button" onclick="submitTest()">Finalizar test</button>
    <div id="result" style="display:none;"></div>
    <button class="button" onclick="location.reload()">Reiniciar</button>
  </div>

</div>

<script>
  // PREGUNTAS DE EJEMPLO CON EXPLICACIONES
  const preguntasMadrid = [
    {
      q: "¿Cuál es el color de la manguera tipo 1?",
      options: ["Rojo", "Negro", "Azul"],
      correct: 1,
      explanation: "La manguera tipo 1 se identifica con el color negro para distinguirla en el equipo."
    },
    {
      q: "¿Qué equipo se usa para rescates en altura?",
      options: ["Cuerda dinámica", "Casco básico", "Extintor de CO₂"],
      correct: 0,
      explanation: "La cuerda dinámica es esencial para rescates en altura por su elasticidad."
    },
    {
      q: "¿Cuál es la presión máxima recomendada en una manguera?",
      options: ["10 bar", "15 bar", "20 bar"],
      correct: 2,
      explanation: "La presión máxima recomendada suele ser 20 bar para evitar daños."
    }
  ];

  const preguntasCadiz = [
    {
      q: "¿Qué agente se usa para fuegos tipo B?",
      options: ["CO₂", "Agua", "Espuma", "Polvo seco"],
      correct: 2,
      explanation: "La espuma es el agente más efectivo para fuegos tipo B que involucran líquidos inflamables."
    },
    {
      q: "¿Cuál es la función del equipo autoescala?",
      options: ["Extinción de incendios", "Rescate en altura", "Ventilación de humos", "Primeros auxilios"],
      correct: 1,
      explanation: "El equipo autoescala se utiliza para rescates en altura y acceso a lugares elevados."
    },
    {
      q: "¿Cuál es el color típico del casco para bomberos en Cádiz?",
      options: ["Blanco", "Rojo", "Amarillo", "Negro"],
      correct: 2,
      explanation: "El casco amarillo es típico para bomberos en Cádiz."
    }
  ];

  // Variables globales
  let currentTestType = null;
  let currentQuestions = [];
  let currentMode = 'exam'; // 'exam' o 'review'
  let currentQuestionIndex = 0;
  let score = 0;
  let timeLeft = 0;
  let timerInterval;

  // FUNCIONES

  function grantAccess() {
    document.getElementById('requestAccess').style.display = 'none';
    document.getElementById('app').style.display = 'flex';
    document.body.style.backgroundColor = '#b30000'; // Puedes ajustar o dejar el degradado
  }

  function selectTest(testType) {
    currentTestType = testType;
    document.getElementById('menu').style.backgroundColor = testType === 'madrid' ? '#003366' : '#FFDD00';
    document.getElementById('afterTestSelect').style.display = 'flex';
  }

  function startTest() {
    const numQ = parseInt(document.getElementById('numQuestions').value);
    if (isNaN(numQ) || numQ < 1 || numQ > 5000) {
      alert('Introduce un número válido de preguntas entre 1 y 5000.');
      return;
    }

    const modeRadio = document.querySelector('input[name="mode"]:checked');
    currentMode = modeRadio ? modeRadio.value : 'exam';

    const allQuestions = currentTestType === 'madrid' ? preguntasMadrid : preguntasCadiz;

    // En caso de que pidan más preguntas que disponibles, ajustamos:
    const maxAvailable = allQuestions.length;
    currentQuestions = allQuestions.slice(0, Math.min(numQ, maxAvailable));

    currentQuestionIndex = 0;
    score = 0;
    timeLeft = currentQuestions.length * 30;

    document.getElementById('menu').style.display = 'none';
    document.getElementById('testSection').style.display = 'block';
    document.getElementById('result').style.display = 'none';
    document.getElementById('explanation').innerHTML = '';
    document.body.style.backgroundColor = currentTestType === 'madrid' ? '#003366' : '#FFDD00';
    document.getElementById('testTitle').textContent = `Test ${currentTestType === 'madrid' ? 'Madrid' : 'Cádiz'} - Pregunta 1 de ${currentQuestions.length}`;

    startTimer();
    showQuestion();
  }

  function startTimer() {
    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      timeLeft--;
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      document.getElementById('timer').textContent = `Tiempo restante: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        submitTest();
      }
    }, 1000);
  }

  function showQuestion() {
    const qObj = currentQuestions[currentQuestionIndex];
    const container = document.getElementById('questionsContainer');
    container.innerHTML = '';

    let optionsHTML = '';
    for(let i=0; i < qObj.options.length; i++) {
      optionsHTML += `
        <label class="option-label" id="option-label-${i}">
          <input type="radio" name="answer" value="${i}" onchange="selectAnswer(${i})" />
          ${qObj.options[i]}
        </label>`;
    }

    container.innerHTML = `<div class="question-box"><h3>${currentQuestionIndex+1}. ${qObj.q}</h3>${optionsHTML}</div>`;
    document.getElementById('explanation').innerHTML = '';
  }

  function selectAnswer(selectedIndex) {
    const qObj = currentQuestions[currentQuestionIndex];
    const labels = document.querySelectorAll('.option-label');
    
    if(currentMode === 'exam') {
      if(selectedIndex === qObj.correct) score++;
      nextQuestion();
    }
    else if(currentMode === 'review') {
      labels.forEach((label, idx) => {
        label.classList.remove('correct', 'incorrect');
        if(idx === qObj.correct) label.classList.add('correct');
        if(idx === selectedIndex && selectedIndex !== qObj.correct) label.classList.add('incorrect');
      });
      if(selectedIndex === qObj.correct) score++;

      document.getElementById('explanation').textContent = qObj.explanation;

      // Deshabilitar inputs para que no cambien
      const inputs = document.querySelectorAll('input[name="answer"]');
      inputs.forEach(i => i.disabled = true);

      setTimeout(nextQuestion, 2000);
    }
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if(currentQuestionIndex >= currentQuestions.length) {
      submitTest();
      return;
    }
    document.getElementById('testTitle').textContent = `Test ${currentTestType === 'madrid' ? 'Madrid' : 'Cádiz'} - Pregunta ${currentQuestionIndex+1} de ${currentQuestions.length}`;
    showQuestion();
  }

  function submitTest() {
    clearInterval(timerInterval);
    document.getElementById('questionsContainer').innerHTML = '';
    document.getElementById('explanation').innerHTML = '';
    document.getElementById('timer').textContent = '';
    document.getElementById('testTitle').textContent = 'Resultado final';

    const total = currentQuestions.length;
    const percent = Math.round((score / total) * 100);

    let color = '#ff5555';
    if (percent >= 80) color = '#00ff99';
    else if (percent >= 50) color = '#ffcc00';

    const resultDiv = document.getElementById('result');
    resultDiv.style.color = color;
    resultDiv.style.display = 'block';
    resultDiv.textContent = `Has acertado ${score} de ${total} preguntas (${percent}%).`;

    // Mostrar botón reiniciar
    document.querySelector('button[onclick="location.reload()"]').style.display = 'block';
  }
</script>

</body>
</html>
